!function(){"use strict";var t=document,e=t.getElementById("main-modal"),n=t.getElementById("alert-modal"),o=t.getElementById("city"),r=t.getElementById("country"),c=t.getElementById("submit-button"),a=t.getElementById("show-button"),i=t.getElementById("history-button"),l=t.querySelectorAll(".close-button"),u=t.querySelectorAll(".ok-button"),d=t.querySelector(".clear-button"),s=t.querySelector("body");function y(){var e=window.innerWidth-t.querySelector("main").offsetWidth+"px";s.style.paddingRight=e,s.classList.add("lock")}function m(t){t.target.closest(".modal").classList.remove("open"),setTimeout((function(){s.style.paddingRight="0px",s.classList.remove("lock")}),500)}function f(t){return t.split(" ")[1]}function p(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var g,v=t.querySelector(".weather-section-image"),b=t.querySelector(".current-temperature"),S=t.querySelector(".location"),w=t.querySelector(".current-time-value"),x=t.querySelector(".current-wind-direction-value"),E=t.querySelector(".current-feels-like-value"),_=t.querySelector(".current-wind-speed-value"),k=t.querySelector(".current-today-is-value"),q=t.querySelector(".current-pressure-value"),L=(g="weatherHistory")in localStorage?JSON.parse(localStorage.getItem("".concat(g))):new Array;A(L,i);var C=[].concat(p(l),p(u));function I(t){fetch("https://weatherapi-com.p.rapidapi.com/current.json?q=".concat(t),{method:"GET",headers:{"x-rapidapi-host":"weatherapi-com.p.rapidapi.com","x-rapidapi-key":"0060b8ce00mshcdd4cc91e36faefp1f326fjsncf88ec66cf0f"}}).then((function(t){return t.json()})).then((function(t){if(t)return t;throw new Error("Something went wrong! Please check the entered data and try again.")})).then((function(t){!function(t){v.style.background="url('".concat(t.current.condition.icon,"') center"),b.textContent="".concat(t.current.temp_c),S.textContent="".concat(t.location.name,", ").concat(t.location.country),w.textContent=f(t.current.last_updated),x.textContent="".concat(t.current.wind_dir),E.innerHTML="".concat(t.current.feelslike_c," &deg C"),_.textContent="".concat(t.current.wind_kph," km/h"),k.textContent="".concat(t.current.condition.text),q.textContent="".concat(t.current.pressure_mb," hPa")}(t),function(t,e){var n=!1;t.forEach((function(o,r){o.location.name==e.location.name&&o.location.country==e.location.country&&(t[r]=e,n=!0)})),n||t.push(e);localStorage.setItem("weatherHistory",JSON.stringify(t))}(L,t),A(L,i)})).catch((function(t){B(t)}))}function A(t,e){0==t.length?e.disabled=!0:e.disabled=!1}function B(t){n.querySelector(".modal-body-text").textContent=t,n.classList.add("open"),y()}function H(t){var e=t.coords,n=e.latitude,o=e.longitude;I("".concat(n,",").concat(o))}function j(t){var e=t.message;B("Error: ".concat(e,"."))}C.forEach((function(t){t.addEventListener("click",(function(t){m(t)}))})),e.addEventListener("click",(function(t){t.target.closest(".modal-content")||m(t)})),n.addEventListener("click",(function(t){t.target.closest(".modal-content")||m(t)})),c.addEventListener("click",(function(){if(""!=o.value&&""!=r.value){var t=(e=o.value,(n=e.trim())[0].toUpperCase()+n.substr(1).toLowerCase());I("".concat(t)),o.value="",r.value=""}else B("Error: Please select your city and country.");var e,n})),i.addEventListener("click",(function(){var t,n,o;e.classList.add("open"),t=L,n=e.querySelector(".modal-body_content"),o="",t.forEach((function(t){o+="\n        <div class='modal-body_content-row'>\n        <p class=\"modal-body_text\">".concat(t.location.name,", ").concat(t.location.country,'</p>\n        <p class="modal-body_text">').concat(f(t.current.last_updated),'</p>\n        <p class="modal-body_text">').concat(t.current.wind_dir,'</p>\n        <p class="modal-body_text">').concat(t.current.feelslike_c,' &deg C</p>\n        <p class="modal-body_text">').concat(t.current.wind_kph,' km/h</p>\n        <p class="modal-body_text">').concat(t.current.condition.text,'</p>\n        <p class="modal-body_text">').concat(t.current.pressure_mb," hPa</p>\n        </div>")})),n.innerHTML=o,y()})),d.addEventListener("click",(function(){e.querySelector(".modal-body_content").innerHTML='<p class="modal-body_text">Weather history successfully deleted.</p>',localStorage.removeItem("weatherHistory"),L.length=0,A(L,i)})),a.addEventListener("click",(function(){navigator.geolocation.getCurrentPosition(H,j,{enableHighAccuracy:!0})}))}();