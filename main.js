!function(){"use strict";var t=document,e=t.getElementById("main-modal"),n=t.getElementById("alert-modal"),r=t.getElementById("city"),o=t.getElementById("country"),c=t.getElementById("submit-button"),a=t.getElementById("show-button"),i=t.getElementById("history-button"),l=t.querySelectorAll(".close-button"),u=t.querySelectorAll(".ok-button"),s=t.querySelector(".clear-button"),d=t.querySelector("body");function y(){var e=window.innerWidth-t.querySelector("main").offsetWidth+"px";d.style.paddingRight=e,d.classList.add("lock")}function m(t){t.target.closest(".modal").classList.remove("open"),setTimeout((function(){d.style.paddingRight="0px",d.classList.remove("lock")}),500)}function f(t){var e=t.trim();return e[0].toUpperCase()+e.substr(1).toLowerCase()}function p(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b,v=t.querySelector(".weather-section-image"),g=t.querySelector(".current-temperature"),w=t.querySelector(".location"),S=t.querySelector(".current-time-value"),E=t.querySelector(".current-wind-direction-value"),_=t.querySelector(".current-feels-like-value"),k=t.querySelector(".current-wind-speed-value"),x=t.querySelector(".current-today-is-value"),q=t.querySelector(".current-pressure-value"),L=(b="weatherHistory")in localStorage?JSON.parse(localStorage.getItem("".concat(b))):new Array;A(L,i);var C=[].concat(p(l),p(u));function I(t,e){var n="http://api.weatherstack.com/current?access_key=".concat("ba84bfbee5907b5ad2b7fa81a316705c","&query=").concat(t,",").concat(e);fetch(n).then((function(t){return t.json()})).then((function(t){if("success"in t)throw new Error("Something went wrong! Please check the entered data and try again.");return t})).then((function(t){!function(t){v.style.background="url('".concat(t.current.weather_icons[0],"') center"),g.textContent="".concat(t.current.temperature),w.textContent="".concat(t.location.name,", ").concat(t.location.country),S.textContent="".concat(t.current.observation_time),E.textContent="".concat(t.current.wind_dir),_.innerHTML="".concat(t.current.feelslike," &deg C"),k.textContent="".concat(t.current.wind_speed," km/h"),x.textContent="".concat(t.current.weather_descriptions[0].toLowerCase()),q.textContent="".concat(t.current.pressure," hPa")}(t),function(t,e){var n=!1;t.forEach((function(r,o){r.location.name==e.location.name&&r.location.country==e.location.country&&(t[o]=e,n=!0)})),n||t.push(e);localStorage.setItem("weatherHistory",JSON.stringify(t))}(L,t),A(L,i)})).catch((function(t){B(t)}))}function A(t,e){0==t.length?e.disabled=!0:e.disabled=!1}function B(t){n.querySelector(".modal-body-text").textContent=t,n.classList.add("open"),y()}function H(t){var e=t.coords;I(e.latitude,e.longitude)}function P(t){var e=t.message;B("Error: ".concat(e,"."))}C.forEach((function(t){t.addEventListener("click",(function(t){m(t)}))})),e.addEventListener("click",(function(t){t.target.closest(".modal-content")||m(t)})),n.addEventListener("click",(function(t){t.target.closest(".modal-content")||m(t)})),c.addEventListener("click",(function(){""!=r.value&&""!=o.value?(I(f(r.value),f(o.value)),r.value="",o.value=""):B("Error: Please select your city and country.")})),i.addEventListener("click",(function(){var t,n,r;e.classList.add("open"),t=L,n=e.querySelector(".modal-body_content"),r="",t.forEach((function(t){r+="\n        <div class='modal-body_content-row'>\n        <p class=\"modal-body_text\">".concat(t.location.name,", ").concat(t.location.country,'</p>\n        <p class="modal-body_text">').concat(t.current.observation_time,'</p>\n        <p class="modal-body_text">').concat(t.current.wind_dir,'</p>\n        <p class="modal-body_text">').concat(t.current.feelslike,' &deg C</p>\n        <p class="modal-body_text">').concat(t.current.wind_speed,' km/h</p>\n        <p class="modal-body_text">').concat(t.current.weather_descriptions[0].toLowerCase(),'</p>\n        <p class="modal-body_text">').concat(t.current.pressure," hPa</p>\n        </div>")})),n.innerHTML=r,y()})),s.addEventListener("click",(function(){e.querySelector(".modal-body_content").innerHTML='<p class="modal-body_text">Weather history successfully deleted.</p>',localStorage.removeItem("weatherHistory"),L.length=0,A(L,i)})),a.addEventListener("click",(function(){navigator.geolocation.getCurrentPosition(H,P,{enableHighAccuracy:!0})}))}();